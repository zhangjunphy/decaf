<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{- Configuration -- describing the overall behavior of the compiler
Copyright (C) 2013  Benjamin Barenblat &lt;bbaren@mit.edu&gt;

This file is a part of decafc.

decafc is free software: you can redistribute it and/or modify it under the
terms of the MIT (X11) License as described in the LICENSE file.

decafc is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.  See the X11 license for more details. -}</span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Configuration</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Configuration.Types.html#Configuration"><span class="hs-identifier">Configuration</span></a></span><span>
</span><span id="line-13"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#input"><span class="hs-identifier">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.html#target"><span class="hs-identifier">target</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#debug"><span class="hs-identifier">debug</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#opt"><span class="hs-identifier">opt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#outputFileName"><span class="hs-identifier">outputFileName</span></a></span><span>
</span><span id="line-14"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#defaultConfiguration"><span class="hs-identifier">defaultConfiguration</span></a></span><span>
</span><span id="line-15"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#CompilerStage"><span class="hs-identifier">CompilerStage</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#OptimizationSpecification"><span class="hs-identifier">OptimizationSpecification</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#OptimizationName"><span class="hs-identifier">OptimizationName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>                     </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Configuration.Types.html"><span class="hs-identifier">Configuration.Types</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Configuration.Types.html#Configuration"><span class="hs-identifier">Configuration</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#input"><span class="hs-identifier">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#debug"><span class="hs-identifier">debug</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#opt"><span class="hs-identifier">opt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#outputFileName"><span class="hs-identifier">outputFileName</span></a></span><span>
</span><span id="line-24"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#explicitTarget"><span class="hs-identifier">explicitTarget</span></a></span><span>
</span><span id="line-25"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#defaultConfiguration"><span class="hs-identifier">defaultConfiguration</span></a></span><span>
</span><span id="line-26"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#CompilerStage"><span class="hs-identifier">CompilerStage</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#OptimizationSpecification"><span class="hs-identifier">OptimizationSpecification</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Configuration.Types.html#OptimizationName"><span class="hs-identifier">OptimizationName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>                           </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-comment">--------------------------- The configuration type ----------------------------</span><span>
</span><span id="line-33"></span><span class="hs-comment">{- 'input', 'debug', 'opt', and 'outputFileName' are fine accessor functions.
'target', on the other hand, is a bit special. -}</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="annot"><a href="Configuration.html#target"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Configuration.Types.html#Configuration"><span class="hs-identifier hs-type">Configuration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Configuration.Types.html#CompilerStage"><span class="hs-identifier hs-type">CompilerStage</span></a></span><span>
</span><span id="line-37"></span><span id="target"><span class="annot"><span class="annottext">target :: Configuration -&gt; CompilerStage
</span><a href="Configuration.html#target"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679162279"><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679162279"><span class="hs-identifier hs-var">conf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerStage -&gt; Maybe CompilerStage -&gt; CompilerStage
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">CompilerStage
</span><a href="#local-6989586621679162280"><span class="hs-identifier hs-var">defaultTarget</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe CompilerStage -&gt; CompilerStage)
-&gt; Maybe CompilerStage -&gt; CompilerStage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Configuration -&gt; Maybe CompilerStage
</span><a href="Configuration.Types.html#explicitTarget"><span class="hs-identifier hs-var">explicitTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Configuration
</span><a href="#local-6989586621679162279"><span class="hs-identifier hs-var">conf</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679162280"><span class="annot"><span class="annottext">defaultTarget :: CompilerStage
</span><a href="#local-6989586621679162280"><span class="hs-identifier hs-var hs-var">defaultTarget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerStage
</span><a href="Configuration.Types.html#Parse"><span class="hs-identifier hs-var">Parse</span></a></span><span>   </span><span class="hs-comment">-- this will change as the course proceeds</span><span>
</span><span id="line-39"></span></pre></body></html>